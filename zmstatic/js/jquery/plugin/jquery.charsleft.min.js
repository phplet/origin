(function(a){a.fn.pasteEvents=function(b){if(b==undefined){b=20}return a(this).each(function(){var c=a(this);c.on("paste",function(){c.trigger("prepaste");setTimeout(function(){c.trigger("postpaste")},b)})})};a.fn.charsLeft=function(b){var c=a.extend({},a.fn.charsLeft.defaultOptions,b);return this.each(function(f){var k=a(this);var h="<div class='"+c.wrapperClass+"'>";h+=c.charPrefix;h+=" <span class='"+c.countClass+"'>"+c.maxChars+"</span> ";h+=c.charSuffix;h+="</div>";switch(c.attachment){case"before":k.before(h);$charCount=k.prev("div").find("."+c.countClass);break;case"after":k.after(h);$charCount=k.next("div").find("."+c.countClass);break;default:k.after(h);$charCount=k.next("div").find("."+c.countClass);break}var g=k.val().length;var d=c.maxChars-g;if(g){$charCount.text(d)}var e=c.disableMode,j=c.maxChars;k.bind("keyup.charsLeft",function(){g=k.val().length;d=j-g;switch(c.attachment){case"before":$charCount=k.prev("div").find("."+c.countClass);break;case"after":$charCount=k.next("div").find("."+c.countClass);break;default:$charCount=k.next("div").find("."+c.countClass);break}$charCount.text(d);if(!e){(d<0)?k.addClass(c.errorClass):k.removeClass(c.errorClass)}else{if(d<0){$charCount.text(0);k.val(k.val().substr(0,j))}}}).on("postpaste",function(){a(this).keyup()}).pasteEvents()})};a.fn.charsLeft.defaultOptions={maxChars:140,disableMode:false,charPrefix:"You have",charSuffix:"characters left.",attachment:"after",wrapperClass:"charsLeft",countClass:"charCount",errorClass:"charError"}})(jQuery);